### 备忘录模式

*created by 付果果  2020.01.02 20:26*

##### 介绍

```javascript
备忘录模式（Memento Pattern）：在不破坏对象的封装性的前提下，在对象之外捕获并保存该对象内部的状态以便日后对对象使用或者对象恢复到以前某个状态。
```

##### 使用场景

```
1、当我们需要频繁请求数据或者很多占用请求时间的数据时，可以对数据进行一个缓存。
2、通常都是使用对象进行缓存，也就是咱们经常用的字典，用时随时在字典中进行读取。
```

##### **优点** 

```
 1、给用户提供了一种可以恢复状态的机制，可以使用户能够比较方便地回到某个历史的状态。 
 2、实现了信息的封装，使得用户不需要关心状态的保存细节。
```

##### 缺点

```
1、消耗资源。如果类的成员变量过多，势必会占用比较大的资源，而且每一次保存都会消耗一定的内存。
```

##### 代码实现

######         case：分页请求数据，下一页 and 上一页？

```
    // 备忘录模式
    var page = function(page) {
        // 数据缓存|备忘录
        var caches = {};
        return function(page) {
            if(caches[page]) {
                showPage(page, caches[page])
            } else {
                getData("/url", function(data) {
                    showPage(page, data);
                    caches[page] = data;
                })
            }
        }
    }
    // 模拟获取数据
    function getData(url, cb) {
        cb(Math.random())
    }
    // 模拟显示数据
    function showPage(page, data) {
        console.log(`显示${page}页的数据${data}`)
    }

    var pager = page(); 
    pager(1);
    pager(2);
    pager(1);
```

##### 总结

```javascript
    备忘录模式最主要是对现有的数据或者状态做缓存，为将来某个时刻使用或者恢复做准备。在javascript编程中，备忘录模式常常用于对数据的缓存备份，浏览器端获取的数据大部分都是从服务器端请求获取到的，而请求的流程
往往是以时间和流量为代价的，因此对重复性数据反复请求不仅增加了服务器端的压力，而且造成了浏览器端对请
求数据的等待进而影响用户的体验。
	在备忘录模式中，数据往往存储在备忘录对象的存储器中，这样对于数据的读取必定通过调用备忘录提供的方法，
因此备忘录对象也是对数据缓存器的一次保护性封装，防止外界的直接访问，方便数据的管理，规范化外界对象对
数据的使用。一旦备忘录对象发现请求的数据或者状态在缓存器中已经存在，将直接从缓存器中读取，从而降低对数据
获取的成本。
	当数据量过大的时候，会严重占用系统提供的资源，这会极大的降低系统的性能，此时对缓存器的缓存策略优化是
很有必要的，复用率低的数据缓存下来是不值得的，因此资源空间的限制是影响备忘录模式应用的一大障碍。不过
随着硬件水平的提高以及浏览器的不断优化，详细资源空间的限制在不久将会得到很大的改善。
```

##### 结语

```javascript
技术交流，共同进步，欢迎fork和star！
```

