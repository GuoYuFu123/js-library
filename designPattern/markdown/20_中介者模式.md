### 中介者模式

*created by 付果果  2019.12.30 19:03*

##### 介绍

```javascript
中介者模式，是通过中介者对象封装一系列对象之间的交互，使对象之间不再相互引用，降低他们之间的耦合。有时中
介者也可改变对象之间的交互。
```

##### 使用场景

```
1、多个类相互耦合，形成了网状结构。
```

##### **优点** 

```
1、各个类之间的解耦。
```

##### 缺点

```
1、中介者会庞大，变得复杂难以维护。
```

##### 代码实现

######         case：买手机我们需要对订阅一下，然后手机到了，中介通知一下。

```
    // 中介对象
    var Mediator = (function() {
        var msg = {};
        return {
            register: function(type, action) {
                if (msg[type]) {
                    msg[type].push(action);
                } else {
                    msg[type] = [action];
                }
            },
            send: function(type) {
                if (msg[type]) {
                    msg[type].forEach(action => {
                        action();
                    })
                } else {    
                    throw new Error("未找到相应的type")
                }
            }
        }
    })()

    // 进行消息订阅

    Mediator.register('apple', function() {
        console.log('收到1');
    })
    Mediator.register('apple', function() {
        console.log('收到2');
    })

    // 中介来发布消息
    Mediator.send("apple")
```

##### 总结

```
中介者的主要业务是通过模块间或者对象的间的复杂通信，来解耦模块间或者对象之间的耦合。对于中介者对象的本质
是分装多个对象的交互，并且这些对象的交互一般在中介者内部实现。取个例子，比如过去的婚假，总要找个媒婆，通
过媒婆的沟通，男女才会相识。房中
介......
```

###### 与外观模式比较

```
中介者模式对多个对象的交互地封装，且这些对象一般处于同一个层面上，并且封装的交互在中介者内部，而外观模式
封装的目的是为了提供更简单的易用接口，而不是添加其他功能。
```

###### 与观察者模式比较

```
虽然2种模式都是通过消息传递实现对象间或者模块间的解耦。观察者模式中的订阅者是双向的，既可以是消息的发布着，也可以是消息的订阅者。而在中介者模式中，订阅者是单向的，只能是消息的订阅者。而消息统一由中介者对象发布，所有的中介者对象间接的被中介者管理。
```

##### 结语

```javascript
技术交流，共同进步，欢迎fork和star！
```

